{% extends "base.j2" %}

{% block basecss %}
{{ super() }}
<link href="{{ media_url('css/columns.css') }}" rel="stylesheet">
{% endblock basecss %}


{% block content %}

<div class="page-header">
  {% block header %}
  <h1>
    {% block page_title %}{{ resource.meta.title }}{% endblock %}
    {% if resource.meta.subtitle %}<small>{% block page_subtitle %}{{ resource.meta.subtitle }}{% endblock %}</small>{% endif %}
  </h1>
  {% endblock header %}
</div>

<div class="row">
  <div class="span9">
    <time datetime="{{ resource.meta.created.strftime('%Y-%m-%d') }}">
      Posted: {{ resource.meta.created.strftime('%a, %d %b %Y') }}
    </time>

    {% if resource.meta.tags %}
    <ul class="tags clear">
    {% for tag in resource.meta.tags %}
    <li>
      <a class="small" href="{{ content_url('blog/tags/'~tag~'.html') }}">
        {{ tag }}
      </a>
    </li>
    {% endfor %}
    </ul>
    {% endif %}

    {% filter markdown|typogrify -%}
      {% mark post -%}
        {% block post -%}{%- endblock %}
      {%- endmark %}
    {%- endfilter %}
  </div>
  <div class="span3">
    {% block sidebar %}
    <nav class="post_nav">
    <a class="backlink" href="{{ content_url(resource.node.url) }}">返回文章列表</a>
    
    <div class="prev">
    前一篇文章:<br />
    {% if not resource.prev_by_time %}
    没有文章了...
    {% else %}
    <a title="{{ resource.prev_by_time.meta.created.strftime('%Y-%m-%d') }}"
       href="{{ content_url(resource.prev_by_time.url) }}">
       {{ resource.prev_by_time.meta.title }}
    </a>
    {% endif %}
    </div>

    <br />

    <div class="next">
    后一篇文章:<br />
    {% if not resource.next_by_time %}
    没有文章了...
    {% else %}
    <a title="{{ resource.next_by_time.meta.created.strftime('%Y-%m-%d') }}"
       href="{{ content_url(resource.next_by_time.url) }}">
       {{ resource.next_by_time.meta.title }}
    </a>
    {% endif %}
    </div>
    {% endblock %}
  </div>
</div>

<hr>


{% block disqus %}
{% include "disqus.j2" %}
{% endblock disqus %}

{% endblock content %}


